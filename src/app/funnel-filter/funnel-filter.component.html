<mat-card appearance="outlined">
  <mat-card-header class="filter-card-header">
    <mat-card-title> Customer filter</mat-card-title>
    <button mat-button (click)="discardFilter()">Discard filter</button>
  </mat-card-header>
  <mat-card-content>
    <mat-card appearance="outlined">
      <mat-card-content>
        <form [formGroup]="customerFilter">
          <div formArrayName="steps">
            @for(step of stepsFormArray.controls; let step_index = $index; track
            step) {
            <div class="step-container">
              <app-funnel-filter-step
                [stepForm]="step"
                [stepIndex]="step_index"
                (onStepDelete)="deleteStep(step_index)"
                (onStepCopy)="copyStep(step_index)"
              ></app-funnel-filter-step>
              <mat-divider></mat-divider>
            </div>
            }
          </div>
        </form>
      </mat-card-content>
      <mat-card-actions align="end">
        <button mat-button (click)="addFilterStep()">+ Add funnel</button>
      </mat-card-actions>
    </mat-card>
  </mat-card-content>
  <mat-card-actions>
    <button mat-button (click)="applyFilter()">Apply filter</button>
  </mat-card-actions>
</mat-card>
